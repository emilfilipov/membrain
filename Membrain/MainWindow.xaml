<Window x:Class="Membrain.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Membrain"
        Width="336"
        MinWidth="336"
        MaxWidth="336"
        Height="700"
        WindowStyle="None"
        ResizeMode="NoResize"
        ShowInTaskbar="True"
        Topmost="True"
        Background="Transparent"
        AllowsTransparency="True"
        FontFamily="Bahnschrift"
        FocusVisualStyle="{x:Null}">
  <Window.Resources>
    <SolidColorBrush x:Key="BgBrush" Color="#101820" />
    <SolidColorBrush x:Key="SurfaceBrush" Color="#0F1720" />
    <SolidColorBrush x:Key="PanelBrush" Color="#0B1219" />
    <SolidColorBrush x:Key="CardBrush" Color="#15212C" />
    <SolidColorBrush x:Key="CardHoverBrush" Color="#1A2A37" />
    <SolidColorBrush x:Key="BorderBrush" Color="#304558" />
    <SolidColorBrush x:Key="BorderSoftBrush" Color="#263B4D" />
    <SolidColorBrush x:Key="AccentBrush" Color="#6FA8D6" />
    <SolidColorBrush x:Key="AccentSoftBrush" Color="#33506A" />
    <SolidColorBrush x:Key="TextPrimaryBrush" Color="#EDF3F8" />
    <SolidColorBrush x:Key="TextMutedBrush" Color="#8EA1B0" />

    <Style x:Key="SettingLabel" TargetType="TextBlock">
      <Setter Property="Foreground" Value="{StaticResource TextMutedBrush}" />
      <Setter Property="Margin" Value="0,0,0,2" />
      <Setter Property="FontSize" Value="12" />
      <Setter Property="FontWeight" Value="SemiBold" />
    </Style>

    <Style TargetType="TextBox">
      <Setter Property="Foreground" Value="{StaticResource TextPrimaryBrush}" />
      <Setter Property="Background" Value="{StaticResource CardBrush}" />
      <Setter Property="BorderBrush" Value="{StaticResource BorderBrush}" />
      <Setter Property="BorderThickness" Value="1" />
      <Setter Property="Padding" Value="10,6" />
      <Setter Property="CaretBrush" Value="{StaticResource TextPrimaryBrush}" />
      <Setter Property="Template">
        <Setter.Value>
          <ControlTemplate TargetType="TextBox">
            <Border x:Name="Box"
                    Background="{TemplateBinding Background}"
                    BorderBrush="{TemplateBinding BorderBrush}"
                    BorderThickness="{TemplateBinding BorderThickness}"
                    CornerRadius="8">
              <ScrollViewer x:Name="PART_ContentHost"
                            Margin="0"
                            VerticalAlignment="Center"
                            SnapsToDevicePixels="True" />
            </Border>
            <ControlTemplate.Triggers>
              <Trigger Property="IsKeyboardFocused" Value="True">
                <Setter TargetName="Box" Property="BorderBrush" Value="{StaticResource AccentBrush}" />
              </Trigger>
              <Trigger Property="IsMouseOver" Value="True">
                <Setter TargetName="Box" Property="BorderBrush" Value="{StaticResource AccentSoftBrush}" />
              </Trigger>
              <Trigger Property="IsEnabled" Value="False">
                <Setter TargetName="Box" Property="Opacity" Value="0.55" />
              </Trigger>
            </ControlTemplate.Triggers>
          </ControlTemplate>
        </Setter.Value>
      </Setter>
    </Style>

    <Style TargetType="PasswordBox">
      <Setter Property="Foreground" Value="{StaticResource TextPrimaryBrush}" />
      <Setter Property="Background" Value="{StaticResource CardBrush}" />
      <Setter Property="BorderBrush" Value="{StaticResource BorderBrush}" />
      <Setter Property="BorderThickness" Value="1" />
      <Setter Property="Padding" Value="10,6" />
      <Setter Property="Template">
        <Setter.Value>
          <ControlTemplate TargetType="PasswordBox">
            <Border x:Name="Box"
                    Background="{TemplateBinding Background}"
                    BorderBrush="{TemplateBinding BorderBrush}"
                    BorderThickness="{TemplateBinding BorderThickness}"
                    CornerRadius="8">
              <ScrollViewer x:Name="PART_ContentHost"
                            Margin="0"
                            VerticalAlignment="Center"
                            SnapsToDevicePixels="True" />
            </Border>
            <ControlTemplate.Triggers>
              <Trigger Property="IsKeyboardFocused" Value="True">
                <Setter TargetName="Box" Property="BorderBrush" Value="{StaticResource AccentBrush}" />
              </Trigger>
              <Trigger Property="IsMouseOver" Value="True">
                <Setter TargetName="Box" Property="BorderBrush" Value="{StaticResource AccentSoftBrush}" />
              </Trigger>
              <Trigger Property="IsEnabled" Value="False">
                <Setter TargetName="Box" Property="Opacity" Value="0.55" />
              </Trigger>
            </ControlTemplate.Triggers>
          </ControlTemplate>
        </Setter.Value>
      </Setter>
    </Style>

    <Style TargetType="ComboBox">
      <Setter Property="Foreground" Value="{StaticResource TextPrimaryBrush}" />
      <Setter Property="Background" Value="{StaticResource CardBrush}" />
      <Setter Property="BorderBrush" Value="{StaticResource BorderBrush}" />
      <Setter Property="BorderThickness" Value="1" />
      <Setter Property="Padding" Value="10,6" />
      <Setter Property="Template">
        <Setter.Value>
          <ControlTemplate TargetType="ComboBox">
            <Grid>
              <Border x:Name="ComboBorder"
                      Background="{TemplateBinding Background}"
                      BorderBrush="{TemplateBinding BorderBrush}"
                      BorderThickness="{TemplateBinding BorderThickness}"
                      CornerRadius="8">
                <DockPanel LastChildFill="True" Margin="2,0">
                  <ToggleButton x:Name="DropDownToggle"
                                DockPanel.Dock="Right"
                                Width="28"
                                Background="Transparent"
                                BorderThickness="0"
                                Focusable="False"
                                IsChecked="{Binding IsDropDownOpen, Mode=TwoWay, RelativeSource={RelativeSource TemplatedParent}}">
                    <Path Data="M 0 0 L 6 6 L 12 0"
                          Stroke="{StaticResource TextMutedBrush}"
                          StrokeThickness="2"
                          HorizontalAlignment="Center"
                          VerticalAlignment="Center" />
                  </ToggleButton>
                  <ContentPresenter Margin="6,0,0,0"
                                    VerticalAlignment="Center"
                                    Content="{TemplateBinding SelectionBoxItem}"
                                    ContentTemplate="{TemplateBinding SelectionBoxItemTemplate}"
                                    ContentTemplateSelector="{TemplateBinding ItemTemplateSelector}"
                                    RecognizesAccessKey="True" />
                </DockPanel>
              </Border>
              <Popup x:Name="PART_Popup"
                     IsOpen="{TemplateBinding IsDropDownOpen}"
                     Placement="Bottom"
                     Width="{Binding ActualWidth, RelativeSource={RelativeSource TemplatedParent}}"
                     AllowsTransparency="True"
                     Focusable="False"
                     PopupAnimation="Slide">
                <Border Background="{StaticResource PanelBrush}"
                        BorderBrush="{StaticResource BorderBrush}"
                        BorderThickness="1"
                        CornerRadius="8"
                        Padding="4"
                        SnapsToDevicePixels="True">
                  <ScrollViewer MaxHeight="220"
                                CanContentScroll="True"
                                HorizontalScrollBarVisibility="Disabled">
                    <ItemsPresenter />
                  </ScrollViewer>
                </Border>
              </Popup>
            </Grid>
            <ControlTemplate.Triggers>
              <Trigger Property="IsMouseOver" Value="True">
                <Setter TargetName="ComboBorder" Property="BorderBrush" Value="{StaticResource AccentSoftBrush}" />
              </Trigger>
              <Trigger Property="IsKeyboardFocused" Value="True">
                <Setter TargetName="ComboBorder" Property="BorderBrush" Value="{StaticResource AccentBrush}" />
              </Trigger>
              <Trigger Property="IsEnabled" Value="False">
                <Setter TargetName="ComboBorder" Property="Opacity" Value="0.55" />
              </Trigger>
            </ControlTemplate.Triggers>
          </ControlTemplate>
        </Setter.Value>
      </Setter>
    </Style>

    <Style TargetType="ComboBoxItem">
      <Setter Property="Foreground" Value="{StaticResource TextPrimaryBrush}" />
      <Setter Property="Padding" Value="8,5" />
      <Setter Property="Template">
        <Setter.Value>
          <ControlTemplate TargetType="ComboBoxItem">
            <Border x:Name="ItemBorder" CornerRadius="6" Background="Transparent" Padding="{TemplateBinding Padding}">
              <ContentPresenter />
            </Border>
            <ControlTemplate.Triggers>
              <Trigger Property="IsHighlighted" Value="True">
                <Setter TargetName="ItemBorder" Property="Background" Value="{StaticResource CardHoverBrush}" />
              </Trigger>
              <Trigger Property="IsSelected" Value="True">
                <Setter TargetName="ItemBorder" Property="Background" Value="#22384A" />
              </Trigger>
              <Trigger Property="IsEnabled" Value="False">
                <Setter TargetName="ItemBorder" Property="Opacity" Value="0.55" />
              </Trigger>
            </ControlTemplate.Triggers>
          </ControlTemplate>
        </Setter.Value>
      </Setter>
    </Style>

    <Style TargetType="CheckBox">
      <Setter Property="Foreground" Value="{StaticResource TextMutedBrush}" />
      <Setter Property="Template">
        <Setter.Value>
          <ControlTemplate TargetType="CheckBox">
            <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
              <Border x:Name="Box" Width="16" Height="16" CornerRadius="3" BorderBrush="{StaticResource BorderBrush}" BorderThickness="1" Background="{StaticResource CardBrush}">
                <Path x:Name="Tick"
                      Data="M 1 7 L 5 11 L 13 2"
                      Stroke="{StaticResource AccentBrush}"
                      StrokeThickness="2"
                      StrokeStartLineCap="Round"
                      StrokeEndLineCap="Round"
                      Visibility="Collapsed" />
              </Border>
              <ContentPresenter Margin="8,0,0,0" VerticalAlignment="Center" />
            </StackPanel>
            <ControlTemplate.Triggers>
              <Trigger Property="IsChecked" Value="True">
                <Setter TargetName="Tick" Property="Visibility" Value="Visible" />
                <Setter TargetName="Box" Property="BorderBrush" Value="{StaticResource AccentBrush}" />
              </Trigger>
              <Trigger Property="IsMouseOver" Value="True">
                <Setter TargetName="Box" Property="BorderBrush" Value="{StaticResource AccentSoftBrush}" />
              </Trigger>
              <Trigger Property="IsEnabled" Value="False">
                <Setter TargetName="Box" Property="Opacity" Value="0.55" />
              </Trigger>
            </ControlTemplate.Triggers>
          </ControlTemplate>
        </Setter.Value>
      </Setter>
    </Style>

    <Style TargetType="Separator">
      <Setter Property="Margin" Value="0,4,0,12" />
      <Setter Property="Template">
        <Setter.Value>
          <ControlTemplate TargetType="Separator">
            <Border Height="1" Background="#213444" />
          </ControlTemplate>
        </Setter.Value>
      </Setter>
    </Style>

    <Style TargetType="ScrollBar">
      <Setter Property="Width" Value="10" />
      <Setter Property="MinWidth" Value="10" />
      <Setter Property="Background" Value="#0D151D" />
      <Setter Property="Template">
        <Setter.Value>
          <ControlTemplate TargetType="ScrollBar">
            <Grid Background="Transparent">
              <Track x:Name="PART_Track" IsDirectionReversed="True">
                <Track.Thumb>
                  <Thumb BorderBrush="#2D4557" BorderThickness="1" MinHeight="24" MinWidth="24">
                    <Thumb.Template>
                      <ControlTemplate TargetType="Thumb">
                        <Border x:Name="ThumbBorder" Background="#1B2D3A" BorderBrush="#2D4557" BorderThickness="1" CornerRadius="6" />
                        <ControlTemplate.Triggers>
                          <Trigger Property="IsMouseOver" Value="True">
                            <Setter TargetName="ThumbBorder" Property="Background" Value="#274054" />
                            <Setter TargetName="ThumbBorder" Property="BorderBrush" Value="{StaticResource AccentSoftBrush}" />
                          </Trigger>
                        </ControlTemplate.Triggers>
                      </ControlTemplate>
                    </Thumb.Template>
                  </Thumb>
                </Track.Thumb>
              </Track>
            </Grid>
          </ControlTemplate>
        </Setter.Value>
      </Setter>
    </Style>

    <Style x:Key="CardButton" TargetType="Button">
      <Setter Property="Foreground" Value="{StaticResource TextPrimaryBrush}" />
      <Setter Property="Background" Value="{StaticResource CardBrush}" />
      <Setter Property="BorderBrush" Value="{StaticResource BorderBrush}" />
      <Setter Property="BorderThickness" Value="1" />
      <Setter Property="Padding" Value="10,8" />
      <Setter Property="Template">
        <Setter.Value>
          <ControlTemplate TargetType="Button">
            <Border x:Name="Root"
                    Background="{TemplateBinding Background}"
                    BorderBrush="{TemplateBinding BorderBrush}"
                    BorderThickness="{TemplateBinding BorderThickness}"
                    CornerRadius="10">
              <ContentPresenter HorizontalAlignment="Stretch" VerticalAlignment="Center" />
            </Border>
            <ControlTemplate.Triggers>
              <Trigger Property="IsMouseOver" Value="True">
                <Setter TargetName="Root" Property="BorderBrush" Value="{StaticResource AccentBrush}" />
                <Setter TargetName="Root" Property="Background" Value="{StaticResource CardHoverBrush}" />
              </Trigger>
              <Trigger Property="IsPressed" Value="True">
                <Setter TargetName="Root" Property="Background" Value="#121C24" />
              </Trigger>
              <Trigger Property="IsEnabled" Value="False">
                <Setter TargetName="Root" Property="Opacity" Value="0.55" />
              </Trigger>
            </ControlTemplate.Triggers>
          </ControlTemplate>
        </Setter.Value>
      </Setter>
    </Style>

    <Style x:Key="ClipboardCardButton" TargetType="Button" BasedOn="{StaticResource CardButton}">
      <Style.Triggers>
        <DataTrigger Binding="{Binding RelativeSource={RelativeSource AncestorType=ListBoxItem}, Path=IsSelected}" Value="True">
          <Setter Property="Background" Value="#1D3140" />
          <Setter Property="BorderBrush" Value="{StaticResource AccentBrush}" />
        </DataTrigger>
      </Style.Triggers>
    </Style>

    <Style x:Key="IconButton" TargetType="Button" BasedOn="{StaticResource CardButton}">
      <Setter Property="Width" Value="30" />
      <Setter Property="Height" Value="30" />
      <Setter Property="Padding" Value="0" />
      <Setter Property="FontSize" Value="16" />
      <Setter Property="HorizontalContentAlignment" Value="Center" />
      <Setter Property="VerticalContentAlignment" Value="Center" />
    </Style>

    <Style TargetType="ListBox">
      <Setter Property="Foreground" Value="{StaticResource TextPrimaryBrush}" />
      <Setter Property="Background" Value="{StaticResource SurfaceBrush}" />
      <Setter Property="BorderBrush" Value="{StaticResource BorderSoftBrush}" />
      <Setter Property="BorderThickness" Value="1" />
      <Setter Property="Template">
        <Setter.Value>
          <ControlTemplate TargetType="ListBox">
            <Border Background="{TemplateBinding Background}"
                    BorderBrush="{TemplateBinding BorderBrush}"
                    BorderThickness="{TemplateBinding BorderThickness}"
                    CornerRadius="10"
                    Padding="6">
              <ScrollViewer Focusable="False" Padding="0" CanContentScroll="True">
                <ItemsPresenter />
              </ScrollViewer>
            </Border>
          </ControlTemplate>
        </Setter.Value>
      </Setter>
    </Style>

    <Style TargetType="ListBoxItem">
      <Setter Property="Background" Value="Transparent" />
      <Setter Property="BorderThickness" Value="0" />
      <Setter Property="Padding" Value="0" />
      <Setter Property="Margin" Value="0,0,0,6" />
      <Setter Property="HorizontalContentAlignment" Value="Stretch" />
      <Setter Property="VerticalContentAlignment" Value="Center" />
      <Setter Property="Template">
        <Setter.Value>
          <ControlTemplate TargetType="ListBoxItem">
            <Border x:Name="SelectionFrame"
                    BorderBrush="Transparent"
                    BorderThickness="1"
                    Background="Transparent"
                    CornerRadius="11"
                    Padding="2">
              <ContentPresenter />
            </Border>
            <ControlTemplate.Triggers>
              <Trigger Property="IsSelected" Value="True">
                <Setter TargetName="SelectionFrame" Property="BorderBrush" Value="{StaticResource AccentBrush}" />
                <Setter TargetName="SelectionFrame" Property="Background" Value="#0F1D27" />
              </Trigger>
            </ControlTemplate.Triggers>
          </ControlTemplate>
        </Setter.Value>
      </Setter>
    </Style>
  </Window.Resources>

  <Border Background="{StaticResource BgBrush}"
          BorderBrush="{StaticResource BorderSoftBrush}"
          BorderThickness="1,0,1,0"
          CornerRadius="0">
    <Grid>
      <Grid.RowDefinitions>
        <RowDefinition Height="48" />
        <RowDefinition Height="*" />
        <RowDefinition Height="Auto" />
      </Grid.RowDefinitions>

      <Grid Grid.Row="0" Margin="8,6,8,6">
        <Grid.ColumnDefinitions>
          <ColumnDefinition Width="6" />
          <ColumnDefinition Width="*" />
          <ColumnDefinition Width="Auto" />
        </Grid.ColumnDefinitions>

        <Border Grid.Column="0" Background="{StaticResource AccentBrush}" CornerRadius="3" Margin="0,2,10,2" />

        <StackPanel Grid.Column="1" Orientation="Vertical" VerticalAlignment="Center">
          <TextBlock Text="MEMBRAIN" Foreground="{StaticResource TextPrimaryBrush}" FontSize="15" FontWeight="Bold" />
          <TextBlock Text="Clipboard Strip" Foreground="{StaticResource TextMutedBrush}" FontSize="11" />
        </StackPanel>

        <Button Grid.Column="2"
                Name="SettingsToggleButton"
                Margin="0,2,0,0"
                Click="SettingsToggleButton_Click"
                ToolTip="Settings"
                Foreground="{StaticResource TextPrimaryBrush}"
                Content="&#x2699;"
                Style="{StaticResource IconButton}" />
      </Grid>

      <Grid Grid.Row="1" Margin="8,0,8,8">
        <Grid.RowDefinitions>
          <RowDefinition Height="*" />
          <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <ListBox Name="HistoryList"
                 Grid.Row="0"
                 Padding="6"
                 MouseDoubleClick="HistoryList_MouseDoubleClick"
                 PreviewMouseWheel="HistoryList_PreviewMouseWheel"
                 ScrollViewer.VerticalScrollBarVisibility="Auto"
                 SelectionMode="Single">
          <ListBox.ItemTemplate>
            <DataTemplate>
              <Button Style="{StaticResource ClipboardCardButton}" Click="ClipboardCard_Click" Margin="0">
                <Grid>
                  <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto" />
                  </Grid.ColumnDefinitions>
                  <TextBlock Text="{Binding Preview}" TextWrapping="Wrap" Foreground="{StaticResource TextPrimaryBrush}" Margin="0,0,10,0" />
                  <TextBlock Grid.Column="1" Text="{Binding Timestamp}" Foreground="{StaticResource TextMutedBrush}" VerticalAlignment="Top" />
                </Grid>
              </Button>
            </DataTemplate>
          </ListBox.ItemTemplate>
        </ListBox>

        <StackPanel Grid.Row="1" Orientation="Horizontal" Margin="0,8,0,0">
          <Button Name="CopySelectedButton"
                  Content="Copy Selected"
                  Width="110"
                  Height="30"
                  Click="CopySelectedButton_Click"
                  Style="{StaticResource CardButton}" />
          <TextBlock Name="StatusTextBlock"
                     Margin="10,6,0,0"
                     Foreground="{StaticResource TextMutedBrush}"
                     FontSize="11"
                     Text="Ready" />
        </StackPanel>
      </Grid>

      <Border Grid.RowSpan="3"
              Name="SettingsPanel"
              Visibility="Collapsed"
              Background="{StaticResource PanelBrush}"
              BorderBrush="{StaticResource AccentSoftBrush}"
              BorderThickness="1"
              Margin="12"
              CornerRadius="10"
              Padding="12">
        <ScrollViewer VerticalScrollBarVisibility="Auto">
          <StackPanel>
            <TextBlock Text="Settings" Foreground="{StaticResource TextPrimaryBrush}" FontSize="16" FontWeight="SemiBold" Margin="0,0,0,10" />

            <TextBlock Text="Activation Hotkey" Style="{StaticResource SettingLabel}" />
            <TextBox Name="ActivationHotkeyTextBox" Margin="0,4,0,10" Height="32" />

            <TextBlock Text="Screen Side" Style="{StaticResource SettingLabel}" />
            <ComboBox Name="SideComboBox" Margin="0,4,0,10" Height="32">
              <ComboBoxItem Content="Left" />
              <ComboBoxItem Content="Right" />
            </ComboBox>

            <TextBlock Text="Scroll Up Key" Style="{StaticResource SettingLabel}" />
            <TextBox Name="ScrollUpKeyTextBox" Margin="0,4,0,10" Height="32" />

            <TextBlock Text="Scroll Down Key" Style="{StaticResource SettingLabel}" />
            <TextBox Name="ScrollDownKeyTextBox" Margin="0,4,0,10" Height="32" />

            <TextBlock Text="Select Key" Style="{StaticResource SettingLabel}" />
            <TextBox Name="SelectKeyTextBox" Margin="0,4,0,10" Height="32" />

            <TextBlock Text="Retained Clipboard Items" Style="{StaticResource SettingLabel}" />
            <TextBox Name="RetainedItemsLimitTextBox" Margin="0,4,0,10" Height="32" />

            <TextBlock Text="Auto-Hide Seconds" Style="{StaticResource SettingLabel}" />
            <TextBox Name="AutoHideSecondsTextBox" Margin="0,4,0,10" Height="32" />

            <Separator />

            <TextBlock Text="Updates" Foreground="{StaticResource TextPrimaryBrush}" FontSize="15" FontWeight="SemiBold" Margin="0,0,0,8" />

            <TextBlock Text="GitHub Repo URL" Style="{StaticResource SettingLabel}" />
            <TextBox Name="UpdateRepoTextBox" Margin="0,4,0,10" Height="32" />

            <TextBlock Text="Access Token" Style="{StaticResource SettingLabel}" />
            <PasswordBox Name="UpdateTokenBox" Margin="0,4,0,10" Height="32" />

            <CheckBox Name="IncludePrereleaseCheckBox"
                      Content="Include pre-releases"
                      Margin="0,0,0,10" />

            <StackPanel Orientation="Horizontal" Margin="0,0,0,8">
              <Button Name="SaveSettingsButton"
                      Content="Save"
                      Width="90"
                      Height="30"
                      Margin="0,0,8,0"
                      Style="{StaticResource CardButton}"
                      Click="SaveSettingsButton_Click" />
              <Button Name="CheckUpdatesButton"
                      Content="Check Updates"
                      Width="110"
                      Height="30"
                      Style="{StaticResource CardButton}"
                      Click="CheckUpdatesButton_Click" />
            </StackPanel>

            <TextBlock Name="UpdateStatusTextBlock" Foreground="{StaticResource TextMutedBrush}" FontSize="11" Text="Updates idle" />
          </StackPanel>
        </ScrollViewer>
      </Border>
    </Grid>
  </Border>
</Window>
